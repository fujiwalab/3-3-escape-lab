<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>研究所×脱出ゲーム</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Zen+Dots&family=Noto+Sans+JP&display=swap" rel="stylesheet">

  <style>
    /* ─── 既存スタイル（短縮せずそのまま） ────────────────────────── */
    *{box-sizing:border-box;margin:0;padding:0;}
    body{font-family:'Noto Sans JP',sans-serif;background:#bbb;
      background-image:
        linear-gradient(to right,rgba(255,255,255,.4)2px,transparent 1px),
        linear-gradient(to bottom,rgba(255,255,255,.4)2px,transparent 1px);
      background-size:50px 50px;background-attachment:fixed;color:#0d1b2a;line-height:1.6;}
    header{background:#006e54;color:#fff;text-align:center;padding:60px 15px 15px;position:relative;
      border-bottom:30px solid #8d6449;background-image:url("https://www.transparenttextures.com/patterns/asfalt-dark.png");
      background-blend-mode:overlay;}
    .title-image{width:100%;max-width:500px;}
    .location-container{display:flex;align-items:center;justify-content:center;gap:12px;font-size:1.1em;color:#f1f1f1;}
    .location-image{width:72px;height:auto;}
    .gimmick-beaker{position:fixed;bottom:20px;left:0;width:110px;animation:wiggle 2s infinite;z-index:999;cursor:pointer;}
    @keyframes wiggle{0%{transform:rotate(0)}25%{transform:rotate(3deg)}50%{transform:rotate(-3deg)}75%{transform:rotate(2deg)}100%{transform:rotate(0)}}

    main{padding:60px 20px;background-color:transparent;
      background-image:url("無題53_20250702233700.png"),url("無題53_20250702233700.png");
      background-size:250px auto,200px auto;background-position:right 0 top 180px,left 0 top 1000px;
      background-repeat:no-repeat,no-repeat;background-attachment:scroll;}

    section{background:rgba(255,255,255,.7);border:1px solid #ccc;border-left:6px solid #7196b3;border-radius:15px;
      box-shadow:0 4px 12px rgba(0,0,0,.1);padding:24px;margin:0 auto 70px;max-width:800px;}
    section h2{font-family:'Orbitron',sans-serif;font-size:1.4em;color:#0d47a1;margin-bottom:15px;
      border-bottom:2px solid #7196b3;padding-bottom:6px;display:flex;align-items:center;gap:10px;}
    .toggle-btn{background:none;border:none;font-size:.85em;color:#0d47a1;cursor:pointer;padding:2px 4px;border-radius:4px;transition:background .2s;}
    .toggle-btn:hover{background:rgba(0,0,0,.05);}
    section p,a{font-size:1em;color:#212121;text-decoration:none;margin-bottom:.8em;}
    a:hover{text-decoration:underline;}
    footer{text-align:center;color:#607d8b;padding:40px 20px;font-size:.9em;background:#f0f0f0;}

    /* ─── ストーリー開閉用 ──────────────────────────── */
    #story-more{display:none;}
    #story-more.is-open{display:block;}

    /* ─── 泡エフェクト用 ───────────────────────────── */
    .bubble{
      position:fixed;
      bottom:110px;          /* ビーカー付近から発生 */
      left:60px;             /* ↑ビーカー左上に合わせて調整 */
      width:14px;height:14px;
      background:rgba(255,255,255,0.9);
      border-radius:50%;
      pointer-events:none;
      animation:bubble-rise 2.2s ease-out forwards;
      z-index:998;
    }
    @keyframes bubble-rise{
      0%{transform:translate(0,0) scale(.6);opacity:1;}
      80%{opacity:.8;}
      100%{transform:translate( -20px,-160px) scale(1.3);opacity:0;}
    }
  </style>
</head>

<body>

  <!-- ーーーーー ヘッダー ーーーーー -->
  <header>
    <img class="title-image" src="無題50_20250709192332.png" alt="タイトル画像">
    <div class="location-container">
      <img class="location-image" src="https://illustkun.com/wp-content/uploads/illustkun-03276-blackboard-eraser.png" alt="黒板消し">
      📍場所：2階 3年3組教室
      <img src="https://tyoudoii-illust.com/wp-content/uploads/2021/02/aisome_school_mono.png" alt="校舎アイコン" style="width:60px;vertical-align:middle;">
    </div>
  </header>

  <!-- ーーーーー ビーカー（クリックで泡） ーーーーー -->
  <img class="gimmick-beaker"
       src="https://illustkun.com/wp-content/uploads/illustkun-04102-beaker.png"
       alt="ビーカーのイラスト"
       onclick="spawnBubbles(event)">

  <!-- ーーーーー メイン ーーーーー -->
  <main>

    <!-- 出し物紹介 -->
    <section>
      <h2>出し物紹介</h2>
      <p>研究員に扮した3-3の生徒たちが白衣でお出迎え！お客さんは謎解きに挑戦し、研究所からの脱出を目指します！</p>
    </section>

    <!-- ストーリー -->
    <section>
      <h2><span>ストーリー</span>
        <button class="toggle-btn" id="toggle-icon"
                onclick="toggleStory()"
                aria-expanded="false" aria-controls="story-more">▽ 開く</button>
      </h2>

      <div class="story-intro" style="margin-top:15px;">
        <p>研究者を夢見る高校生のあなたに、ついに研究所見学のチャンスが訪れた。</p>
        <p>期待に胸を膨らませ、案内された研究室へと足を踏み入れる。</p>
        <p>――その瞬間、アラートが鳴り響く。</p>
      </div>

      <div id="story-more">
        <p>＊緊急事態発生‼️緊急事態発生‼️<br>10分後にこの研究室をロックダウンします＊</p>
        <p>突如として研究室に閉じ込められたあなた。残されたのはわずかな時間と、いくつかの手がかりだけ。</p>
        <p>あなたは10分以内に、すべての謎を解き、この部屋から脱出できるのか？</p>
        <p>夢に近づいたその日、あなたは夢に閉じ込められた。</p>
      </div>
    </section>

    <!-- 以下、他のセクションは元のまま省略 -->
    <!-- …… -->

  </main>

  <footer>
    <p>© 2025 3-3 Escape Lab. All rights reserved.</p>
  </footer>

  <!-- ーーーーー JavaScript ーーーーー -->
  <script>
    /* ストーリー開閉 */
    function toggleStory(){
      const box=document.getElementById('story-more');
      const btn=document.getElementById('toggle-icon');
      const open=box.classList.toggle('is-open');
      btn.textContent=open?'△ 閉じる':'▽ 開く';
      btn.setAttribute('aria-expanded',open);
    }

    /* 泡を生成して浮かせる */
    function spawnBubbles(e){
      // 一度に3〜6個ランダム生成
      const count=Math.floor(Math.random()*4)+3;
      for(let i=0;i<count;i++){
        const b=document.createElement('div');
        b.className='bubble';
        // 水平方向に少しばらつき
        b.style.left=(60+Math.random()*40)+'px';
        // 大きさランダム
        const size=10+Math.random()*10;
        b.style.width=b.style.height=size+'px';
        // アニメ後に消す
        b.addEventListener('animationend',()=>b.remove());
        document.body.appendChild(b);
      }
    }
  </script>

</body>
</html>
